<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Capítulo 4 Renta Fija | Introducción a las finanzas quantitativas</title>
  <meta name="description" content="Esto es un apunte en proceso pensado en el curso Finanza I de Ingeniería Comercial de la Universidad de Chile">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="Capítulo 4 Renta Fija | Introducción a las finanzas quantitativas" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Esto es un apunte en proceso pensado en el curso Finanza I de Ingeniería Comercial de la Universidad de Chile" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Capítulo 4 Renta Fija | Introducción a las finanzas quantitativas" />
  
  <meta name="twitter:description" content="Esto es un apunte en proceso pensado en el curso Finanza I de Ingeniería Comercial de la Universidad de Chile" />
  

<meta name="author" content="Gabriel Cabrera G.">


<meta name="date" content="2019-04-14">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="portafolio.html">
<link rel="next" href="options.html">
<script src="libs/jquery/jquery.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets/htmlwidgets.js"></script>
<link href="libs/datatables-css/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding/datatables.js"></script>
<link href="libs/dt-core/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk/js/crosstalk.min.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; } /* Alert */
code span.an { color: #008000; } /* Annotation */
code span.at { } /* Attribute */
code span.bu { } /* BuiltIn */
code span.cf { color: #0000ff; } /* ControlFlow */
code span.ch { color: #008080; } /* Char */
code span.cn { } /* Constant */
code span.co { color: #008000; } /* Comment */
code span.cv { color: #008000; } /* CommentVar */
code span.do { color: #008000; } /* Documentation */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.im { } /* Import */
code span.in { color: #008000; } /* Information */
code span.kw { color: #0000ff; } /* Keyword */
code span.op { } /* Operator */
code span.ot { color: #ff4000; } /* Other */
code span.pp { color: #ff4000; } /* Preprocessor */
code span.sc { color: #008080; } /* SpecialChar */
code span.ss { color: #008080; } /* SpecialString */
code span.st { color: #008080; } /* String */
code span.va { } /* Variable */
code span.vs { color: #008080; } /* VerbatimString */
code span.wa { color: #008000; font-weight: bold; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Finance Rocks!!</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Prefacio</a></li>
<li class="chapter" data-level="" data-path="sobre-el-autor.html"><a href="sobre-el-autor.html"><i class="fa fa-check"></i>Sobre el Autor</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introducción</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#r"><i class="fa fa-check"></i><b>1.1</b> R</a><ul>
<li class="chapter" data-level="1.1.1" data-path="intro.html"><a href="intro.html#un-poco-de-historia"><i class="fa fa-check"></i><b>1.1.1</b> Un poco de historia</a></li>
<li class="chapter" data-level="1.1.2" data-path="intro.html"><a href="intro.html#los-primeros-pasos"><i class="fa fa-check"></i><b>1.1.2</b> Los primeros pasos</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#rstudio"><i class="fa fa-check"></i><b>1.2</b> RStudio</a><ul>
<li class="chapter" data-level="1.2.1" data-path="intro.html"><a href="intro.html#partes-de-rstudio"><i class="fa fa-check"></i><b>1.2.1</b> Partes de RStudio</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#scripts"><i class="fa fa-check"></i><b>1.3</b> <em>Scripts</em></a></li>
<li class="chapter" data-level="1.4" data-path="intro.html"><a href="intro.html#proyectos"><i class="fa fa-check"></i><b>1.4</b> Proyectos</a></li>
<li class="chapter" data-level="1.5" data-path="intro.html"><a href="intro.html#packages"><i class="fa fa-check"></i><b>1.5</b> <em>Packages</em></a><ul>
<li class="chapter" data-level="1.5.1" data-path="intro.html"><a href="intro.html#tidyverse"><i class="fa fa-check"></i><b>1.5.1</b> <em>tidyverse</em></a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="intro.html"><a href="intro.html#ejemplo"><i class="fa fa-check"></i><b>1.6</b> Ejemplo</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="quantmod.html"><a href="quantmod.html"><i class="fa fa-check"></i><b>2</b> Quantmod</a><ul>
<li class="chapter" data-level="2.1" data-path="quantmod.html"><a href="quantmod.html#que-es-quantmod"><i class="fa fa-check"></i><b>2.1</b> ¿Que es quantmod?</a></li>
<li class="chapter" data-level="2.2" data-path="quantmod.html"><a href="quantmod.html#obtencion-de-datos"><i class="fa fa-check"></i><b>2.2</b> Obtención de Datos</a><ul>
<li class="chapter" data-level="2.2.1" data-path="quantmod.html"><a href="quantmod.html#que-hizo-la-funcion-getsymbols"><i class="fa fa-check"></i><b>2.2.1</b> ¿Qué hizo la función <code>getSymbols</code>?</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="quantmod.html"><a href="quantmod.html#graficando-con-chartseries"><i class="fa fa-check"></i><b>2.3</b> Graficando con <code>chartSeries</code></a><ul>
<li class="chapter" data-level="2.3.1" data-path="quantmod.html"><a href="quantmod.html#chartseries"><i class="fa fa-check"></i><b>2.3.1</b> <code>chartSeries</code></a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="quantmod.html"><a href="quantmod.html#graficando-con-ggplot2"><i class="fa fa-check"></i><b>2.4</b> Graficando con <code>ggplot2</code></a><ul>
<li class="chapter" data-level="2.4.1" data-path="quantmod.html"><a href="quantmod.html#breve-introduccion-a-ggplot2"><i class="fa fa-check"></i><b>2.4.1</b> Breve introducción a <code>ggplot2</code></a></li>
<li class="chapter" data-level="2.4.2" data-path="quantmod.html"><a href="quantmod.html#color-tamano-forma-y-otros-atributos-del-aesthetic"><i class="fa fa-check"></i><b>2.4.2</b> Color, tamaño, forma y otros atributos del <em>aesthetic</em></a></li>
<li class="chapter" data-level="2.4.3" data-path="quantmod.html"><a href="quantmod.html#sp-500-con-ggplot2"><i class="fa fa-check"></i><b>2.4.3</b> S&amp;P 500 con <code>ggplot2</code></a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="quantmod.html"><a href="quantmod.html#multiples-datos"><i class="fa fa-check"></i><b>2.5</b> Multiples Datos</a><ul>
<li class="chapter" data-level="2.5.1" data-path="quantmod.html"><a href="quantmod.html#retornos"><i class="fa fa-check"></i><b>2.5.1</b> Retornos</a></li>
<li class="chapter" data-level="2.5.2" data-path="quantmod.html"><a href="quantmod.html#retornos-acumulados"><i class="fa fa-check"></i><b>2.5.2</b> Retornos Acumulados</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="quantmod.html"><a href="quantmod.html#estadistica-descriptiva"><i class="fa fa-check"></i><b>2.6</b> Estadística Descriptiva</a></li>
<li class="chapter" data-level="2.7" data-path="quantmod.html"><a href="quantmod.html#ratio-de-sharpe"><i class="fa fa-check"></i><b>2.7</b> Ratio de Sharpe</a></li>
<li class="chapter" data-level="2.8" data-path="quantmod.html"><a href="quantmod.html#test-de-jarquebera"><i class="fa fa-check"></i><b>2.8</b> Test de JarqueBera</a></li>
<li class="chapter" data-level="2.9" data-path="quantmod.html"><a href="quantmod.html#recursos-del-capitulo"><i class="fa fa-check"></i><b>2.9</b> Recursos del capítulo</a></li>
<li class="chapter" data-level="2.10" data-path="quantmod.html"><a href="quantmod.html#apendice"><i class="fa fa-check"></i><b>2.10</b> Apéndice</a><ul>
<li class="chapter" data-level="2.10.1" data-path="quantmod.html"><a href="quantmod.html#retorno-y-retorno-acumulado"><i class="fa fa-check"></i><b>2.10.1</b> Retorno y retorno acumulado</a></li>
<li class="chapter" data-level="2.10.2" data-path="quantmod.html"><a href="quantmod.html#graficar-retorno-acumulado"><i class="fa fa-check"></i><b>2.10.2</b> Graficar retorno acumulado</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="portafolio.html"><a href="portafolio.html"><i class="fa fa-check"></i><b>3</b> Introducción a teoría de portafolio</a><ul>
<li class="chapter" data-level="3.1" data-path="portafolio.html"><a href="portafolio.html#libreria-introcompfinr"><i class="fa fa-check"></i><b>3.1</b> Librería IntroCompFinR</a><ul>
<li class="chapter" data-level="3.1.1" data-path="portafolio.html"><a href="portafolio.html#funciones-utiles-de-introcompfinr"><i class="fa fa-check"></i><b>3.1.1</b> Funciones útiles de IntroCompFinR</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="portafolio.html"><a href="portafolio.html#cargando-la-libreria-y-la-base-de-datos"><i class="fa fa-check"></i><b>3.2</b> Cargando la librería y la base de datos</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="bonos.html"><a href="bonos.html"><i class="fa fa-check"></i><b>4</b> Renta Fija</a><ul>
<li class="chapter" data-level="4.1" data-path="bonos.html"><a href="bonos.html#precio-de-un-bono"><i class="fa fa-check"></i><b>4.1</b> Precio de un Bono</a></li>
<li class="chapter" data-level="4.2" data-path="bonos.html"><a href="bonos.html#dos-formas-de-hacer-lo-mismo"><i class="fa fa-check"></i><b>4.2</b> Dos formas de hacer lo mismo</a></li>
<li class="chapter" data-level="4.3" data-path="bonos.html"><a href="bonos.html#funciones"><i class="fa fa-check"></i><b>4.3</b> Funciones</a></li>
<li class="chapter" data-level="4.4" data-path="bonos.html"><a href="bonos.html#relacion-precio-del-bono-y-yield"><i class="fa fa-check"></i><b>4.4</b> Relación precio del Bono y Yield</a><ul>
<li class="chapter" data-level="4.4.1" data-path="bonos.html"><a href="bonos.html#valorizacion"><i class="fa fa-check"></i><b>4.4.1</b> Valorización</a></li>
<li class="chapter" data-level="4.4.2" data-path="bonos.html"><a href="bonos.html#construccion-yields"><i class="fa fa-check"></i><b>4.4.2</b> Construcción yields</a></li>
<li class="chapter" data-level="4.4.3" data-path="bonos.html"><a href="bonos.html#loops"><i class="fa fa-check"></i><b>4.4.3</b> Loops</a></li>
<li class="chapter" data-level="4.4.4" data-path="bonos.html"><a href="bonos.html#graficando"><i class="fa fa-check"></i><b>4.4.4</b> Graficando</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="bonos.html"><a href="bonos.html#trabajando-con-yields-reales"><i class="fa fa-check"></i><b>4.5</b> Trabajando con yields reales</a></li>
<li class="chapter" data-level="4.6" data-path="bonos.html"><a href="bonos.html#duracion-y-convexidad-de-un-bono"><i class="fa fa-check"></i><b>4.6</b> Duración y Convexidad de un Bono</a><ul>
<li class="chapter" data-level="4.6.1" data-path="bonos.html"><a href="bonos.html#extracion-de-la-yield"><i class="fa fa-check"></i><b>4.6.1</b> Extración de la yield</a></li>
<li class="chapter" data-level="4.6.2" data-path="bonos.html"><a href="bonos.html#duracion-bono-bullet-o-americano"><i class="fa fa-check"></i><b>4.6.2</b> Duración (Bono Bullet o Americano)</a></li>
<li class="chapter" data-level="4.6.3" data-path="bonos.html"><a href="bonos.html#duracion-con-libreria"><i class="fa fa-check"></i><b>4.6.3</b> Duración con librería</a></li>
<li class="chapter" data-level="4.6.4" data-path="bonos.html"><a href="bonos.html#convexidad"><i class="fa fa-check"></i><b>4.6.4</b> Convexidad</a></li>
<li class="chapter" data-level="4.6.5" data-path="bonos.html"><a href="bonos.html#convexidad-con-libreria"><i class="fa fa-check"></i><b>4.6.5</b> Convexidad con librería:</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="bonos.html"><a href="bonos.html#efecto-dolar"><i class="fa fa-check"></i><b>4.7</b> Efecto Dolar</a></li>
<li class="chapter" data-level="4.8" data-path="bonos.html"><a href="bonos.html#ejercicio"><i class="fa fa-check"></i><b>4.8</b> Ejercicio</a></li>
<li class="chapter" data-level="4.9" data-path="bonos.html"><a href="bonos.html#apendice-1"><i class="fa fa-check"></i><b>4.9</b> Apéndice</a><ul>
<li class="chapter" data-level="4.9.1" data-path="bonos.html"><a href="bonos.html#bono-frances"><i class="fa fa-check"></i><b>4.9.1</b> Bono Frances</a></li>
</ul></li>
<li class="chapter" data-level="4.10" data-path="bonos.html"><a href="bonos.html#recursos-del-capitulo-1"><i class="fa fa-check"></i><b>4.10</b> Recursos del capítulo</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="options.html"><a href="options.html"><i class="fa fa-check"></i><b>5</b> Opciones, Derivados y Futuros</a><ul>
<li class="chapter" data-level="5.1" data-path="options.html"><a href="options.html#call-put"><i class="fa fa-check"></i><b>5.1</b> Call &amp; Put</a><ul>
<li class="chapter" data-level="5.1.1" data-path="options.html"><a href="options.html#posicion-larga-en-call-payoff-profit"><i class="fa fa-check"></i><b>5.1.1</b> Posición Larga en Call: Payoff &amp; Profit</a></li>
<li class="chapter" data-level="5.1.2" data-path="options.html"><a href="options.html#posicion-larga-en-put-payoff-profit"><i class="fa fa-check"></i><b>5.1.2</b> Posición larga en put: Payoff &amp; Profit</a></li>
<li class="chapter" data-level="5.1.3" data-path="options.html"><a href="options.html#posicion-corta-en-call-payoff-profit"><i class="fa fa-check"></i><b>5.1.3</b> Posición corta en call: Payoff &amp; Profit</a></li>
<li class="chapter" data-level="5.1.4" data-path="options.html"><a href="options.html#posicion-corta-en-put-payoff-profit"><i class="fa fa-check"></i><b>5.1.4</b> Posición corta en put: Payoff &amp; Profit</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="options.html"><a href="options.html#estrategias"><i class="fa fa-check"></i><b>5.2</b> Estrategias</a><ul>
<li class="chapter" data-level="5.2.1" data-path="options.html"><a href="options.html#bull-spread-utilidades"><i class="fa fa-check"></i><b>5.2.1</b> Bull Spread Utilidades</a></li>
<li class="chapter" data-level="5.2.2" data-path="options.html"><a href="options.html#funcion-bull-spread"><i class="fa fa-check"></i><b>5.2.2</b> Función Bull Spread</a></li>
<li class="chapter" data-level="5.2.3" data-path="options.html"><a href="options.html#posicion-call-larga-corta-para-el-bull-spread-call"><i class="fa fa-check"></i><b>5.2.3</b> Posición call Larga &amp; Corta Para el Bull Spread Call</a></li>
<li class="chapter" data-level="5.2.4" data-path="options.html"><a href="options.html#construccion-de-la-bull-spread-call"><i class="fa fa-check"></i><b>5.2.4</b> Construcción de la Bull Spread Call</a></li>
<li class="chapter" data-level="5.2.5" data-path="options.html"><a href="options.html#grafico-bull-spread-call"><i class="fa fa-check"></i><b>5.2.5</b> Gráfico Bull Spread Call</a></li>
<li class="chapter" data-level="5.2.6" data-path="options.html"><a href="options.html#con-libreria-la-bull-spread-call"><i class="fa fa-check"></i><b>5.2.6</b> Con librería la Bull Spread Call</a></li>
<li class="chapter" data-level="5.2.7" data-path="options.html"><a href="options.html#con-libreria-el-grafico-bull-spread-call"><i class="fa fa-check"></i><b>5.2.7</b> Con librería El gráfico Bull Spread Call</a></li>
<li class="chapter" data-level="5.2.8" data-path="options.html"><a href="options.html#payoff-inferior-bull-spread-call-de-la-libreria"><i class="fa fa-check"></i><b>5.2.8</b> Payoff inferior Bull Spread Call de la Librería</a></li>
<li class="chapter" data-level="5.2.9" data-path="options.html"><a href="options.html#payoff-superior-bull-spread-call-de-la-libreria"><i class="fa fa-check"></i><b>5.2.9</b> Payoff superior Bull Spread Call de la Librería</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="options.html"><a href="options.html#black-scholes"><i class="fa fa-check"></i><b>5.3</b> Black &amp; Scholes</a><ul>
<li class="chapter" data-level="5.3.1" data-path="options.html"><a href="options.html#black-scholes-de-la-formula-a-una-funcion"><i class="fa fa-check"></i><b>5.3.1</b> Black &amp; Scholes: de la formula a una función</a></li>
<li class="chapter" data-level="5.3.2" data-path="options.html"><a href="options.html#black-scholes-ejercicio"><i class="fa fa-check"></i><b>5.3.2</b> Black &amp; Scholes: Ejercicio</a></li>
<li class="chapter" data-level="5.3.3" data-path="options.html"><a href="options.html#black-scholes-funcion"><i class="fa fa-check"></i><b>5.3.3</b> Black &amp; Scholes: Función</a></li>
<li class="chapter" data-level="5.3.4" data-path="options.html"><a href="options.html#black-scholes-ahora-con-librerias"><i class="fa fa-check"></i><b>5.3.4</b> Black &amp; Scholes: Ahora con librerías</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="options.html"><a href="options.html#black-scholes-con-datos-reales"><i class="fa fa-check"></i><b>5.4</b> Black &amp; Scholes con Datos Reales</a><ul>
<li class="chapter" data-level="5.4.1" data-path="options.html"><a href="options.html#black-scholes-con-datos-reales-pasos"><i class="fa fa-check"></i><b>5.4.1</b> Black &amp; Scholes con Datos Reales: Pasos</a></li>
<li class="chapter" data-level="5.4.2" data-path="options.html"><a href="options.html#parte-a"><i class="fa fa-check"></i><b>5.4.2</b> Parte a</a></li>
<li class="chapter" data-level="5.4.3" data-path="options.html"><a href="options.html#parte-b"><i class="fa fa-check"></i><b>5.4.3</b> Parte b</a></li>
<li class="chapter" data-level="5.4.4" data-path="options.html"><a href="options.html#parte-c-y-d"><i class="fa fa-check"></i><b>5.4.4</b> Parte c y d</a></li>
<li class="chapter" data-level="5.4.5" data-path="options.html"><a href="options.html#parte-e"><i class="fa fa-check"></i><b>5.4.5</b> Parte e</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="options.html"><a href="options.html#arbol-binomial"><i class="fa fa-check"></i><b>5.5</b> Árbol Binomial</a><ul>
<li class="chapter" data-level="5.5.1" data-path="options.html"><a href="options.html#ejercicio-1"><i class="fa fa-check"></i><b>5.5.1</b> Ejercicio</a></li>
<li class="chapter" data-level="5.5.2" data-path="options.html"><a href="options.html#call-europea"><i class="fa fa-check"></i><b>5.5.2</b> Call europea</a></li>
<li class="chapter" data-level="5.5.3" data-path="options.html"><a href="options.html#call-europea-grafico"><i class="fa fa-check"></i><b>5.5.3</b> Call europea gráfico</a></li>
<li class="chapter" data-level="5.5.4" data-path="options.html"><a href="options.html#call-americana"><i class="fa fa-check"></i><b>5.5.4</b> Call americana</a></li>
<li class="chapter" data-level="5.5.5" data-path="options.html"><a href="options.html#call-americana-grafico"><i class="fa fa-check"></i><b>5.5.5</b> Call americana gráfico</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introducción a las finanzas quantitativas</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="bonos" class="section level1">
<h1><span class="header-section-number">Capítulo 4</span> Renta Fija</h1>
<blockquote>
<p>IMPORTANTE: Aún no está del todo listo el formato en pdf, por lo que recomiendo verlo online.</p>
</blockquote>
<pre class="sourceCode r"><code class="sourceCode r"><span class="cf">if</span>(<span class="op">!</span><span class="kw">require</span>(<span class="st">&quot;pacman&quot;</span>)) <span class="kw">install.packages</span>(<span class="st">&quot;pacman&quot;</span>)
<span class="kw">p_load</span>(<span class="st">&quot;tidyverse&quot;</span>, <span class="st">&quot;quantmod&quot;</span>)</code></pre>
<div id="precio-de-un-bono" class="section level2">
<h2><span class="header-section-number">4.1</span> Precio de un Bono</h2>
<p>El precio de un bono se calcula como:</p>
<p><span class="math display">\[
P_{B} = \sum_{t=1}^{T} \frac{C}{(1+r)^t} + \frac{\text{ValorNominal}}{(1+r)^t}
\]</span></p>
<p>Donde:</p>
<ul>
<li><span class="math inline">\(P_B\)</span>: Precio del Bono</li>
<li><span class="math inline">\(C_t\)</span>: Pago interéses o cupones</li>
<li><span class="math inline">\(T\)</span> : Números de períodos o madurez</li>
<li><span class="math inline">\(r\)</span> : Tasa de descuento o yield-to-maturity semi-anual</li>
</ul>
<p>Consideremos el siguiente ejercicio:</p>
<p>Calcular el precio de un bono con pago de cupón semestral, Madurez 25 años, Tasa cupón 6.5%, Yield semi-anual de 6.9% y Valor nominal de 100.</p>
<p>Para desarrollar el ejercicio, debemos construir por “parte”&quot; los componentes de nuestro bono.</p>
<ol style="list-style-type: decimal">
<li>Construimos tanto la tasa cupón como la <em>Yield semi-anual</em>.</li>
</ol>
<pre class="sourceCode r"><code class="sourceCode r">tc &lt;-<span class="st"> </span><span class="fl">0.065</span>
y  &lt;-<span class="st"> </span><span class="fl">0.069</span></code></pre>
<ol start="2" style="list-style-type: decimal">
<li>Construimos un vector con los valores de los cupones más el principal</li>
</ol>
<pre class="sourceCode r"><code class="sourceCode r">pago &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">rep</span>(tc<span class="op">*</span><span class="dv">100</span><span class="op">/</span><span class="dv">2</span>,<span class="dv">49</span>),(<span class="dv">100</span> <span class="op">+</span><span class="st"> </span>tc<span class="op">*</span><span class="dv">100</span><span class="op">/</span><span class="dv">2</span>))</code></pre>
<p>tanto <code>tc</code>, <code>r</code> y <code>pago</code> se encontraran en <em>Values</em> del <em>global environment</em>, en tipo <code>numeric</code>. <code>c</code> es una función generica para crear vectores, <code>rep</code> hace una repetición de <code>tc*100/2</code> 49 veces y el numero 50, es igual al principal más <code>tc*100/2</code>. Recordar que como es semi-anual se divide por 2 el valor nominal de 100.</p>
<ol start="3" style="list-style-type: decimal">
<li>Para poder trabajar con nuestra base de datos, transformamos nuestro vector <code>pago</code> que está en forma <code>numeric</code> a <code>data frame</code>.</li>
</ol>
<pre class="sourceCode r"><code class="sourceCode r">pago &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(pago)</code></pre>
<p>Ahora existe un objeto con una estructura de datos <code>data frame</code> en nuestro global environment. Nuestro nuevo objeto <code>pago</code> se podría haber llamado de cualquier forma.</p>
</div>
<div id="dos-formas-de-hacer-lo-mismo" class="section level2">
<h2><span class="header-section-number">4.2</span> Dos formas de hacer lo mismo</h2>
<p>Ya construido nuestro objeto <code>pago</code> veremos que en <strong>R</strong> existen muchas formas de hacer lo mismo:</p>
<ol style="list-style-type: decimal">
<li>Al principio del capítulo cargamos la libreria <code>tidyverse</code>, está nos permitirá trabajar con un “megapaquete” que incluye otros paquetes en su interior (ggplot2, dplyr, magittr, entre otros). Todos los paquetes que conforman “el Tidyverse” comparten la misma visión sobre el trabajo con datos y la escritura de código. Si vamos a la pestaña packages y escribimos <code>dplyr</code> veremos que está activo, pero nunca lo “llamamos”, esto se debe a <code>tidyverse</code> lo hizo por nosotros.</li>
</ol>
<pre class="sourceCode r"><code class="sourceCode r">pago1 &lt;-<span class="st"> </span>pago <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">         </span><span class="kw">mutate</span>(<span class="dt">t1 =</span> <span class="kw">as.numeric</span>(<span class="kw">index</span>(pago)),<span class="dt">factor_desc =</span> <span class="dv">1</span><span class="op">/</span>(<span class="dv">1</span><span class="op">+</span>y<span class="op">/</span><span class="dv">2</span>)<span class="op">^</span>(t1),
                <span class="dt">val_present =</span> pago<span class="op">*</span>factor_desc) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">         </span><span class="kw">summarise</span>(<span class="kw">sum</span>(val_present)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">         </span><span class="kw">rename</span>(<span class="st">`</span><span class="dt">Precio Bono</span><span class="st">`</span> =<span class="st"> `</span><span class="dt">sum(val_present)</span><span class="st">`</span>)

pago1</code></pre>
<pre><code>##   Precio Bono
## 1       95.27</code></pre>
<p>El precio del bono es 95.2663.</p>
<ol start="2" style="list-style-type: decimal">
<li>La otra forma es:</li>
</ol>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># replicamos el objeto</span>
pago2 &lt;-<span class="st"> </span>pago

pago2<span class="op">$</span>t2 &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(<span class="kw">rownames</span>(pago2))

<span class="co"># Calculamos el factor de descuento</span>
pago2<span class="op">$</span>factor_desc &lt;-<span class="st"> </span><span class="dv">1</span> <span class="op">/</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span>y<span class="op">/</span><span class="dv">2</span>)<span class="op">^</span>(pago2<span class="op">$</span>t2)
<span class="co"># Calculamos el valor presente</span>
pago2<span class="op">$</span>val_present &lt;-<span class="st">  </span>pago2<span class="op">$</span>factor_desc<span class="op">*</span>pago2<span class="op">$</span>pago
<span class="co"># Calculamos el precio</span>
<span class="kw">sum</span>(pago2<span class="op">$</span>val_present)</code></pre>
<pre><code>## [1] 95.27</code></pre>
<p>Como es de esperarse obtenemos el mismo precio del bono, 95.2663.</p>
</div>
<div id="funciones" class="section level2">
<h2><span class="header-section-number">4.3</span> Funciones</h2>
<p>Dominar por completo las funciones en R lleva practica y dedicación, no obstante, la dificultad que utilizaremos en este capítulo es baja y es un buen ejemplo practico para comenzar.</p>
<p>Toda función en R, tiene tres partes.</p>
<ol style="list-style-type: decimal">
<li>El <code>body()</code>, el código dentro de la función.</li>
<li>El <code>formals()</code>, la lista de argumentos que controlan como puedes llamar la función.</li>
<li>El <code>environment()</code>, el “mapa” de la locación de las variables de la función.</li>
</ol>
<p>A continuación vamos a crear un función que permita calcular el cuadrado de cualquier número:</p>
<pre class="sourceCode r"><code class="sourceCode r">f &lt;-<span class="st"> </span><span class="cf">function</span>(x){
    x<span class="op">^</span><span class="dv">2</span>
}</code></pre>
<p>Para obtener el cuadrado de 2 y de 4:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">f</span>(<span class="dv">2</span>)</code></pre>
<pre><code>## [1] 4</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">f</span>(<span class="dv">4</span>)</code></pre>
<pre><code>## [1] 16</code></pre>
<p>En el ejemplo anterior el <code>formals()</code> de <code>f</code>:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">formals</span>(f)</code></pre>
<pre><code>## $x</code></pre>
<p>el <code>body()</code> de <code>f</code>:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">body</span>(f)</code></pre>
<pre><code>## {
##     x^2
## }</code></pre>
<p>y el <code>environment()</code> de <code>f</code>:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">environment</span>(f)</code></pre>
<pre><code>## &lt;environment: R_GlobalEnv&gt;</code></pre>
<p>Ya visto una breve introducción a funciones en R, procedemos a construir una función que nos permitirá valorizar cualquier bono que <strong>pague cupones iguales</strong>:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># p: valor nominal; tc: tasa cupón; t: madurez; y: yield to maturity</span>
precio.bono &lt;-<span class="st"> </span><span class="cf">function</span>(p,tc,t,y){
  pago   &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">rep</span>(tc<span class="op">*</span>p, t <span class="op">-</span><span class="st"> </span><span class="dv">1</span>),p<span class="op">*</span>(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span>tc))
  pago   &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(pago)
  pago<span class="op">$</span>t &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(<span class="kw">rownames</span>(pago))
  pago<span class="op">$</span>factor_desc &lt;-<span class="st"> </span><span class="dv">1</span> <span class="op">/</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span>y)<span class="op">^</span>(pago<span class="op">$</span>t)
  pago<span class="op">$</span>valor_prese &lt;-<span class="st"> </span>pago<span class="op">$</span>factor_desc<span class="op">*</span>pago<span class="op">$</span>pago
  <span class="kw">sum</span>(pago<span class="op">$</span>valor_prese)
}</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">precio.bono</span>(<span class="dv">100</span>,<span class="fl">0.065</span><span class="op">/</span><span class="dv">2</span>,<span class="dv">50</span>,<span class="fl">0.069</span><span class="op">/</span><span class="dv">2</span>)</code></pre>
<pre><code>## [1] 95.27</code></pre>
<p>Usando el mismo ejemplo de la sección anterior, obtenermos un precio igual a 95.2663.</p>
</div>
<div id="relacion-precio-del-bono-y-yield" class="section level2">
<h2><span class="header-section-number">4.4</span> Relación precio del Bono y Yield</h2>
<div id="valorizacion" class="section level3">
<h3><span class="header-section-number">4.4.1</span> Valorización</h3>
<p>Ahora utilizando la función <code>precio.bono</code> valorizaremos un bono con las siguientes características:</p>
<ul>
<li>Principal : 100</li>
<li>Tasa Cupón: 5%</li>
<li>Madurez: 10 años</li>
<li>Yield: 4.29%</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Valoramos el siguiente Bono</span>
<span class="kw">precio.bono</span>(<span class="dt">p =</span> <span class="dv">100</span>, <span class="dt">tc =</span> <span class="fl">0.05</span>, <span class="dt">t =</span> <span class="dv">10</span>, <span class="dt">y =</span> <span class="fl">0.0429</span>)</code></pre>
<pre><code>## [1] 105.7</code></pre>
</div>
<div id="construccion-yields" class="section level3">
<h3><span class="header-section-number">4.4.2</span> Construcción yields</h3>
<p>Se contruirá una secuencia de yields:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Cosntruimos yields </span>
yields &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="fl">0.02</span>, <span class="fl">0.4</span>, <span class="fl">0.01</span>)</code></pre>
<p>La función <code>seq</code> generá una secuencia. En este caso parte del 0.02 hasta el 0.4 pero con intervalos de 0.01.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Convertimos yields a data frame como antes </span>
yields &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(yields)</code></pre>
</div>
<div id="loops" class="section level3">
<h3><span class="header-section-number">4.4.3</span> Loops</h3>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Calaculamos el precio del bono para distintas yields</span>
<span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(yields)) {
  yields<span class="op">$</span>precio[i] &lt;-<span class="st"> </span><span class="kw">precio.bono</span>(<span class="dv">100</span>, <span class="fl">0.10</span>, <span class="dv">20</span>, yields<span class="op">$</span>yields[i])  
}</code></pre>
</div>
<div id="graficando" class="section level3">
<h3><span class="header-section-number">4.4.4</span> Graficando</h3>
<p>Una manera de visualizar datos es usar ggplot2, se recomienda que añadan por parte lo que desean en su gráfico.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Graficamos con ggplot2</span>
g1 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> yields,<span class="kw">aes</span>(<span class="dt">x =</span> yields<span class="op">*</span><span class="dv">100</span>, <span class="dt">y =</span> precio)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_line</span>(<span class="dt">size =</span> <span class="fl">1.5</span>, <span class="dt">color =</span> <span class="st">&quot;red&quot;</span>) 
g1 &lt;-<span class="st"> </span>g1 <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="dt">size =</span> <span class="dv">3</span>, <span class="dt">color =</span> <span class="st">&quot;red&quot;</span>)
g1 &lt;-<span class="st"> </span>g1 <span class="op">+</span><span class="st"> </span><span class="kw">ggtitle</span>(<span class="st">&quot;Relación inversa:&quot;</span>, <span class="dt">subtitle =</span> <span class="st">&quot;Precio del Bono vs Yield&quot;</span>)
g1 &lt;-<span class="st"> </span>g1 <span class="op">+</span><span class="st"> </span><span class="kw">xlab</span>(<span class="st">&quot;Yield (%)&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">ylab</span>(<span class="st">&quot;Precio del bono&quot;</span>) 
g1 &lt;-<span class="st"> </span>g1 <span class="op">+</span><span class="st"> </span><span class="kw">geom_ribbon</span>(<span class="kw">aes</span>(<span class="dt">ymin =</span> <span class="dv">0</span>, <span class="dt">ymax =</span> <span class="kw">pmax</span>(precio,<span class="dv">0</span>)), <span class="dt">fill=</span><span class="st">&quot;pink&quot;</span>, <span class="dt">col=</span><span class="st">&quot;red&quot;</span>, <span class="dt">alpha=</span><span class="fl">0.5</span>) 
g1 &lt;-<span class="st"> </span>g1 <span class="op">+</span><span class="st"> </span><span class="kw">theme_bw</span>() 
g1 &lt;-<span class="st"> </span>g1 <span class="op">+</span><span class="st"> </span><span class="kw">theme</span>(<span class="dt">panel.border =</span> <span class="kw">element_rect</span>(<span class="dt">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="dt">fill =</span> <span class="ot">NA</span>, <span class="dt">size =</span> <span class="fl">.5</span>),
                 <span class="dt">panel.grid.major =</span> <span class="kw">element_line</span>(<span class="dt">colour =</span> <span class="st">&quot;#d3d3d3&quot;</span>))    
g1</code></pre>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-53"></span>
<img src="bookdown-demo_files/figure-html/unnamed-chunk-53-1.png" alt="Relación Bono vs Yield" width="672" />
<p class="caption">
Figure 4.1: Relación Bono vs Yield
</p>
</div>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Guarmados gráfico</span>
<span class="kw">ggsave</span>(<span class="st">&quot;retorno-yield.png&quot;</span>,<span class="dt">width =</span> <span class="fl">8.5</span>, <span class="dt">height =</span> <span class="fl">4.5</span>, <span class="dt">dpi =</span> <span class="dv">300</span>)</code></pre>
</div>
</div>
<div id="trabajando-con-yields-reales" class="section level2">
<h2><span class="header-section-number">4.5</span> Trabajando con yields reales</h2>
<p>quantmod es uno de las librerías más ocupadas en R para extraer datos financieros, te permite graficar, realizar análisis técnico, calcular retornos (<code>Delt(x)</code>), etc. Aunque las series son descargadas con estructura xts, la podemos transformar a data frame. A continuación descargaremos la yield de los bonos del tesoro de Estados Unidos a 10 años:</p>
<pre class="sourceCode r"><code class="sourceCode r">t10yr &lt;-<span class="st"> </span><span class="kw">getSymbols</span>(<span class="dt">Symbols =</span> <span class="st">&quot;DGS10&quot;</span>, <span class="dt">src =</span> <span class="st">&quot;FRED&quot;</span>, <span class="dt">auto.assign =</span> <span class="ot">FALSE</span>)

t10yr &lt;-<span class="st"> </span><span class="kw">subset</span>(t10yr[<span class="st">&quot;2000-01-01/2018-04-17&quot;</span>])</code></pre>
<p>Con la función <code>subset</code> extramos una parte de los datos, especificamente desde 2000-01-01 hasta 2018-04-17. Luego graficamos usando la función <code>chartSeries</code> de <code>quantmod</code>. Tener cuidado con la función, dado que solo funciona con extensión xts.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Grafico con chartSeries de quantmod solo funciona con xts</span>
<span class="kw">chartSeries</span>(t10yr,  <span class="dt">theme =</span> <span class="st">&quot;white&quot;</span>)</code></pre>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-55"></span>
<img src="bookdown-demo_files/figure-html/unnamed-chunk-55-1.png" alt="yield del tesoro de los Estados Unidos con chartSeries" width="672" />
<p class="caption">
Figure 4.2: yield del tesoro de los Estados Unidos con chartSeries
</p>
</div>
<p>En caso que se quiera graficar usando <code>ggplot2</code>:</p>
<pre class="sourceCode r"><code class="sourceCode r">t10yr.df &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(t10yr)

t10yr.df &lt;-<span class="st"> </span>t10yr.df <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">            </span><span class="kw">mutate</span>(<span class="dt">fecha =</span> <span class="kw">as.Date</span>(<span class="kw">rownames</span>(t10yr.df))) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">            </span><span class="kw">na.omit</span>()

g3 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> t10yr.df,<span class="kw">aes</span>(<span class="dt">x =</span> fecha , <span class="dt">y =</span> DGS10)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_line</span>(<span class="dt">size =</span> <span class="dv">1</span>, <span class="dt">color =</span> <span class="st">&quot;green&quot;</span>)
g3 &lt;-<span class="st"> </span>g3 <span class="op">+</span><span class="st"> </span><span class="kw">ggtitle</span>(<span class="st">&quot;10-Year US Treasury Yields&quot;</span>, <span class="dt">subtitle =</span> <span class="st">&quot;Desde 2000-01-01 hasta 2018-04-17&quot;</span>)
g3 &lt;-<span class="st"> </span>g3 <span class="op">+</span><span class="st"> </span><span class="kw">ylab</span>(<span class="st">&quot;Fecha&quot;</span>) <span class="op">+</span><span class="kw">xlab</span>(<span class="st">&quot;Yield(%)&quot;</span>) 
g3 &lt;-<span class="st"> </span>g3 <span class="op">+</span><span class="st"> </span><span class="kw">theme_bw</span>() <span class="op">+</span><span class="st"> </span><span class="kw">theme</span>(<span class="dt">panel.border =</span> <span class="kw">element_rect</span>(<span class="dt">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="dt">fill =</span> <span class="ot">NA</span>, <span class="dt">size =</span> <span class="fl">.5</span>),
                              <span class="dt">panel.grid.major =</span> <span class="kw">element_line</span>(<span class="dt">colour =</span> <span class="st">&quot;#d3d3d3&quot;</span>))
g3</code></pre>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-56"></span>
<img src="bookdown-demo_files/figure-html/unnamed-chunk-56-1.png" alt="yield del tesoro de los Estados Unidos con ggplot2" width="672" />
<p class="caption">
Figure 4.3: yield del tesoro de los Estados Unidos con ggplot2
</p>
</div>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Guarmados gráfico</span>
<span class="kw">ggsave</span>(<span class="st">&quot;treasury-yields.png&quot;</span>,<span class="dt">width =</span> <span class="fl">8.5</span>, <span class="dt">height =</span> <span class="fl">4.5</span>, <span class="dt">dpi =</span> <span class="dv">300</span>)</code></pre>
</div>
<div id="duracion-y-convexidad-de-un-bono" class="section level2">
<h2><span class="header-section-number">4.6</span> Duración y Convexidad de un Bono</h2>
<div id="extracion-de-la-yield" class="section level3">
<h3><span class="header-section-number">4.6.1</span> Extración de la yield</h3>
<p>La función <code>subset</code> permite extraer una parte de tu base según un criterio como vimos con anterioridad. En el código presentado a continuación, extraemos un valor de la yield para una fecha en especifico, 2017-03-03 y luego la dividimos por 100.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Extraemos un valor en específico</span>
t10yr_yield &lt;-<span class="st"> </span>t10yr.df <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">               </span><span class="kw">subset</span>(fecha <span class="op">==</span><span class="st"> &quot;2017-03-03&quot;</span>) 

t10yr_yield &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(t10yr_yield<span class="op">$</span>DGS10)<span class="op">*</span><span class="fl">0.01</span>  </code></pre>
</div>
<div id="duracion-bono-bullet-o-americano" class="section level3">
<h3><span class="header-section-number">4.6.2</span> Duración (Bono Bullet o Americano)</h3>
<p>Existen dos Duraciones, la de Macaulay y modificada (o de Hicks), las que miden sensibilidad del precio ante cambios de la yield. Dos bonos con la misma duración tendrá el mismo cambio en precio estimado.</p>
<p><strong>Macaulay</strong>:</p>
<p><span class="math display">\[
\text{Duracion de Macaulay} =\bigg[ \frac{1 + y}{y} - \frac{1+y + [n \cdot (c - y)]}{[ c\cdot((1+y)^n - 1)]+y} \bigg]
\]</span></p>
<p><strong>Modificada</strong>:</p>
<p><span class="math display">\[
\text{Duracion Modificada} = \text{Duracion de Macaulay}/(1+y)
\]</span>
<strong>Aproximación Duración Modificada</strong>:</p>
<p><span class="math display">\[
Aprox.Dur.Mod.= \frac{MV_{-}-MV_{+}}{2 \cdot \Delta y \cdot MV_{0}}
\]</span></p>
<div id="duracion-macaulay" class="section level4">
<h4><span class="header-section-number">4.6.2.1</span> Duración Macaulay</h4>
<p>Como ya presentamos la formula de la duración de Macaulay, la construimos como una función.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># duracion de Macaulay</span>
macaulay &lt;-<span class="st"> </span><span class="cf">function</span>(y,n,c,t,T){
         mac &lt;-<span class="st"> </span>(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span>y)<span class="op">/</span>y <span class="op">-</span><span class="st"> </span>(<span class="dv">1</span><span class="op">+</span>y<span class="op">+</span>(n<span class="op">*</span>(c<span class="op">-</span>y)))<span class="op">/</span>(c<span class="op">*</span>((<span class="dv">1</span><span class="op">+</span>y)<span class="op">^</span>n <span class="dv">-1</span>) <span class="op">+</span><span class="st"> </span>y)
         <span class="kw">print</span>(mac)
} </code></pre>
<p>Usandola con la yield extraida:</p>
<pre class="sourceCode r"><code class="sourceCode r">macaulay &lt;-<span class="st"> </span><span class="kw">macaulay</span>(t10yr_yield,<span class="dv">10</span>,<span class="fl">0.03</span>)</code></pre>
<pre><code>## [1] 8.817</code></pre>
</div>
<div id="duracion-modificada" class="section level4">
<h4><span class="header-section-number">4.6.2.2</span> Duración Modificada</h4>
<p>La aplicación de la duración modificada es directa.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># duración modificada</span>
modificada &lt;-<span class="st"> </span>macaulay<span class="op">/</span>(<span class="dv">1</span><span class="op">+</span>t10yr_yield)
modificada </code></pre>
<pre><code>## [1] 8.603</code></pre>
</div>
<div id="aproximacion-duracion-modificada" class="section level4">
<h4><span class="header-section-number">4.6.2.3</span> Aproximación Duración Modificada</h4>
<p>Una aproximación a la duración Modificada se puede obtener como:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Para la aproximación de la duración modificada</span>
precio.arriba &lt;-<span class="st"> </span><span class="kw">precio.bono</span>(<span class="dt">p =</span> <span class="dv">100</span>, <span class="dt">tc =</span> <span class="fl">0.03</span>, <span class="dt">t =</span> <span class="dv">10</span>, <span class="dt">y =</span> t10yr_yield <span class="op">+</span><span class="st"> </span><span class="fl">0.01</span>)
precio        &lt;-<span class="st"> </span><span class="kw">precio.bono</span>(<span class="dt">p =</span> <span class="dv">100</span>, <span class="dt">tc =</span> <span class="fl">0.03</span>, <span class="dt">t =</span> <span class="dv">10</span>, <span class="dt">y =</span> t10yr_yield)
precio.abajo  &lt;-<span class="st"> </span><span class="kw">precio.bono</span>(<span class="dt">p =</span> <span class="dv">100</span>, <span class="dt">tc =</span> <span class="fl">0.03</span>, <span class="dt">t =</span> <span class="dv">10</span>, <span class="dt">y =</span> t10yr_yield <span class="op">-</span><span class="st"> </span><span class="fl">0.01</span>)</code></pre>
<p>Uniendo los objetos creados.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Calculo de aproximación duración modificada</span>
aprox.dur.mod &lt;-<span class="st"> </span>(precio.abajo <span class="op">-</span><span class="st"> </span>precio.arriba)<span class="op">/</span>(<span class="dv">2</span> <span class="op">*</span><span class="st"> </span>precio <span class="op">*</span><span class="st"> </span><span class="fl">0.01</span>)
aprox.dur.mod</code></pre>
<pre><code>## [1] 8.62</code></pre>
<p>Así obtenemos una diferencia de 0.0169.</p>
</div>
</div>
<div id="duracion-con-libreria" class="section level3">
<h3><span class="header-section-number">4.6.3</span> Duración con librería</h3>
<p>Una librería útil para calcular las duraciones como la convexidad (en la siguiente secciòn) es <code>derivmkts</code>. Si no estamos usando la librería <code>pacman</code> recordar:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">&quot;derivmkts&quot;</span>)
<span class="kw">library</span>(<span class="st">&quot;derivmkts&quot;</span>)</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Con librerias</span>
<span class="kw">p_load</span>(<span class="st">&quot;derivmkts&quot;</span>)

<span class="co"># Duración moficada </span>
<span class="kw">duration</span>(precio, <span class="dv">3</span>, <span class="dv">10</span>, <span class="dv">100</span>, <span class="dv">1</span>, <span class="dt">modified =</span> <span class="ot">TRUE</span>)</code></pre>
<pre><code>## [1] 8.603</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Duración Macaulay</span>
<span class="kw">duration</span>(precio, <span class="dv">3</span>, <span class="dv">10</span>, <span class="dv">100</span>, <span class="dv">1</span>, <span class="dt">modified =</span> <span class="ot">FALSE</span>)</code></pre>
<pre><code>## [1] 8.817</code></pre>
<p>Si escribimos <code>modified = TRUE</code>, la función <code>duration</code> computa la duración modificada, por otro lado, si <code>modified = FALSE</code> obtenemos la duración de Macaulay. Losa valores son los mismo obtenidos sin librería.</p>
</div>
<div id="convexidad" class="section level3">
<h3><span class="header-section-number">4.6.4</span> Convexidad</h3>
<p>La convexidad es la segunda derivada de la curva de rendimiento y es màs precisa que la duración cuando el cambio de la <em>yield</em> es màs “grande”. Esto es porque la duración es la línea tangente en el punto calculado de la curva de rendimientos, el problema es que a medida que nos alejamos por la curva de rendimientos la distancia entre la curva y esa línea calculada se vuelve cada vez más grande.</p>
<p><span class="math display">\[
\text{Convexidad} = \frac{1}{P \times (1+y)^2} \sum_{t=1}^{T} \bigg[ \frac{CF_{t}}{(1 + y)^t } (t^2 + t) \bigg]
\]</span></p>
<p>Donde:</p>
<ul>
<li><span class="math inline">\(P\)</span> : Precio Bono.</li>
<li><span class="math inline">\(y\)</span> : <em>yield to maturity</em>.</li>
<li><span class="math inline">\(T\)</span> : Madurez en años.</li>
<li><span class="math inline">\(CF_{t}\)</span> : <em>Cash flow</em> en el tiempo <span class="math inline">\(t\)</span>.</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Calculamos medida de convexidad</span>
convexidad &lt;-<span class="st"> </span>(precio.arriba <span class="op">+</span><span class="st"> </span>precio.abajo  <span class="op">-</span><span class="st"> </span><span class="dv">2</span> <span class="op">*</span><span class="st"> </span>precio)<span class="op">/</span>(precio <span class="op">*</span><span class="st"> </span>(<span class="fl">0.01</span>)<span class="op">^</span><span class="dv">2</span>)
convexidad</code></pre>
<pre><code>## [1] 88.45</code></pre>
<div id="aproximacion-convexidad" class="section level4">
<h4><span class="header-section-number">4.6.4.1</span> Aproximación Convexidad</h4>
<p>La aproximación a la convexidad se puede obtener usando:</p>
<p><span class="math display">\[
\text{Aproximacion Convexidad} = \frac{MV_{-}+MV_{+}-2*MV_{0}}{MV_{0}*\Delta y^2}
\]</span></p>
<p>donde:</p>
<ul>
<li><span class="math inline">\(MV_{0}\)</span> : Precio del Bono.</li>
<li><span class="math inline">\(MV_{-}\)</span> : Precio del Bono cuando la tasa de interes aumenta.</li>
<li><span class="math inline">\(MV_{+}\)</span> : Precio del Bono cuando la tasa de interes disminuye.</li>
<li><span class="math inline">\(\Delta y\)</span> : Cambio en la tasa de interes.</li>
</ul>
</div>
</div>
<div id="convexidad-con-libreria" class="section level3">
<h3><span class="header-section-number">4.6.5</span> Convexidad con librería:</h3>
<p>La función <code>convexity</code> de la librería <code>derivmkts</code> permite calcular la convexidad.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">convexity</span>(precio, <span class="dv">3</span>, <span class="dv">10</span>, <span class="dv">100</span>, <span class="dv">1</span>)</code></pre>
<pre><code>## [1] 88.34</code></pre>
</div>
</div>
<div id="efecto-dolar" class="section level2">
<h2><span class="header-section-number">4.7</span> Efecto Dolar</h2>
<p>El efecto dolar no es más que la suma del cambio (<em>dollar change</em>) del precio del bono ante un cambio marginal de la <em>yield</em>, tanto para la duración como la convexidad.</p>
<p><span class="math display">\[
\text{Efecto Dolar} = \Delta P_{duration} + \Delta P_{convexity}  
\]</span>
Donde:</p>
<p><span class="math display">\[
\text{Duration Dollar Change} = -D \times \Delta y \times P = \Delta P_{duration}
\]</span></p>
<p>Donde:</p>
<ul>
<li><span class="math inline">\(D\)</span> : Duración.</li>
<li><span class="math inline">\(\Delta y\)</span> : Cambio en la <em>yield</em>.</li>
<li><span class="math inline">\(P\)</span> : Precio Bono.</li>
</ul>
<p><span class="math display">\[
\text{Convexity Dollar Change} = 0.5 \times C \times (\Delta y)^2 \times P = \Delta P_{convexity}  
\]</span>
Donde:</p>
<ul>
<li><span class="math inline">\(C\)</span> : Convexidad.</li>
<li><span class="math inline">\((\Delta y)^2\)</span> : Cambio en la <em>yield</em> al cuadrado.</li>
<li><span class="math inline">\(P\)</span> : Precio Bono.</li>
</ul>
</div>
<div id="ejercicio" class="section level2">
<h2><span class="header-section-number">4.8</span> Ejercicio</h2>
<ol style="list-style-type: decimal">
<li><strong>Duración y Convexidad</strong></li>
</ol>
<p>Un portfolio manager de renta fija nacional ha invertido en un bono a cuatro años de ENERSIS. El instrumento cuenta con una tasa cupón anual de 3 % y un valor nominal de US $100 millones. Adicionalmente sabe que actualmente la tasa de descuento TIR anual es del 8 %. Debido a un aumento en el nivel de precios, el portfolio manager se encuentra preocupado por un eventual incremento en la tasa de interés que fija el Banco Central, por lo tanto recurre a Ud. para que lo asesore ante este posible escenario de alza de tasas.</p>
<ol style="list-style-type: lower-alpha">
<li>Calcule la duración y convexidad de este bono.</li>
</ol>
<p>Calculamos el precio del bono:</p>
<pre class="sourceCode r"><code class="sourceCode r">precio &lt;-<span class="st"> </span><span class="kw">precio.bono</span>(<span class="dt">p =</span> <span class="dv">100</span>, <span class="dt">tc =</span> <span class="fl">0.03</span>, <span class="dt">t =</span> <span class="dv">4</span>, <span class="dt">y =</span> <span class="fl">0.08</span>)</code></pre>
<p>La duración es:</p>
<pre class="sourceCode r"><code class="sourceCode r">duration_mac &lt;-<span class="st"> </span><span class="kw">duration</span>(precio, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">100</span>, <span class="dv">1</span>, <span class="dt">modified =</span> <span class="ot">FALSE</span>)
duration_mac</code></pre>
<pre><code>## [1] 3.81</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">duration_mod &lt;-<span class="st"> </span><span class="kw">duration</span>(precio, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">100</span>, <span class="dv">1</span>, <span class="dt">modified =</span> <span class="ot">TRUE</span>)
duration_mod</code></pre>
<pre><code>## [1] 3.528</code></pre>
<p>La convexidad es:</p>
<pre class="sourceCode r"><code class="sourceCode r">convexity &lt;-<span class="st"> </span><span class="kw">convexity</span>(precio, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">100</span>, <span class="dv">1</span>)</code></pre>
<ol start="2" style="list-style-type: lower-alpha">
<li>Utilizando la duración, calcule cuánto bajará de precio el bono ante un aumento de la TIR del 1 % y ante un aumento del 10%. Cómo cambia el resultado anterior si se utiliza convexidad.</li>
</ol>
<p>Si la variación es de 1 %, la regla de la duración entrega los siguientes resultados:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">-</span>duration_mod<span class="op">*</span><span class="fl">0.01</span></code></pre>
<pre><code>## [1] -0.03528</code></pre>
<p>Si la variación es de 1 %, la regla de la convexidad entrega los siguientes
resultados:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">-</span>duration_mod<span class="op">*</span><span class="fl">0.01</span> <span class="op">+</span><span class="st"> </span><span class="fl">0.5</span><span class="op">*</span>convexity<span class="op">*</span>(<span class="fl">0.01</span>)<span class="op">^</span><span class="dv">2</span></code></pre>
<pre><code>## [1] -0.03447</code></pre>
<p>Se observa que para variaciones pequeñas ambas medidas entregan resultados muy similares</p>
<p>Por otro lado, si la variación en la TIR es de 10 % la regla de duración arroja
los siguientes resultados:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">-</span>duration_mod<span class="op">*</span><span class="fl">0.1</span></code></pre>
<pre><code>## [1] -0.3528</code></pre>
<p>Mientras que para la convexidad se tiene lo siguiente:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">-</span>duration_mod<span class="op">*</span><span class="fl">0.1</span> <span class="op">+</span><span class="st"> </span><span class="fl">0.5</span><span class="op">*</span>convexity<span class="op">*</span>(<span class="fl">0.1</span>)<span class="op">^</span><span class="dv">2</span></code></pre>
<pre><code>## [1] -0.2724</code></pre>
<p>Donde se observa que los resultados guardan una diferencia mucho mayor cuando se examina el efecto en el precio de una variación significativa en la tasa de interés</p>
</div>
<div id="apendice-1" class="section level2">
<h2><span class="header-section-number">4.9</span> Apéndice</h2>
<div id="bono-frances" class="section level3">
<h3><span class="header-section-number">4.9.1</span> Bono Frances</h3>
<p>El precio del Bono Frances es dístinto al Bono Bullet, dado que amortiza mediante una renta constante de <span class="math inline">\(n\)</span> cuotas.</p>
<p><span class="math display">\[
cuota =  C_{0} \times \frac{i \times (1+i)^{n}}{(1+i)^{n}-1}
\]</span>
donde:</p>
<ul>
<li><span class="math inline">\(C_{0}\)</span> = Principañ</li>
<li><span class="math inline">\(n\)</span> = Duración de la operación en meses, trimestres, semestres o años.</li>
<li><span class="math inline">\(i\)</span> = Tasa de interés.</li>
</ul>
<p>En R la función sería:</p>
<pre class="sourceCode r"><code class="sourceCode r">    precio_frances &lt;-<span class="st"> </span><span class="cf">function</span>(p,tc,t,y){
      
      cuota &lt;-<span class="st"> </span>p<span class="op">*</span>(tc<span class="op">*</span>(<span class="dv">1</span><span class="op">+</span>tc)<span class="op">^</span>(t))<span class="op">/</span>((<span class="dv">1</span><span class="op">+</span>tc)<span class="op">^</span>(t) <span class="op">-</span><span class="st"> </span><span class="dv">1</span>)
      
      pago &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">rep</span>(cuota, t))
      pago &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(pago)
      pago<span class="op">$</span>t &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(<span class="kw">rownames</span>(pago))
      pago<span class="op">$</span>factor_desc &lt;-<span class="st"> </span><span class="dv">1</span> <span class="op">/</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span>y)<span class="op">^</span>(pago<span class="op">$</span>t)
      pago<span class="op">$</span>valor_prese &lt;-<span class="st"> </span>pago<span class="op">$</span>factor_desc<span class="op">*</span>pago<span class="op">$</span>pago
      <span class="kw">sum</span>(pago<span class="op">$</span>valor_prese)
    }</code></pre>
<p>Para calcular la duración y convexidad cambia y no podemos usar la formula mostrada con anterioridad:</p>
<ol style="list-style-type: decimal">
<li>Duración Bono Frances:</li>
</ol>
<p><span class="math display">\[
D = \frac{\sum_{t=1}^{n} C_{t} t (1+r)^{-t}}{\sum_{t=1}^{n} C_{t} (1+r)^{-t}}
\]</span></p>
<pre class="sourceCode r"><code class="sourceCode r">    duracion_frances &lt;-<span class="st"> </span><span class="cf">function</span>(p,tc,t,y){
      
      cuota &lt;-<span class="st"> </span>p<span class="op">*</span>(tc<span class="op">*</span>(<span class="dv">1</span><span class="op">+</span>tc)<span class="op">^</span>(t))<span class="op">/</span>((<span class="dv">1</span><span class="op">+</span>tc)<span class="op">^</span>(t) <span class="op">-</span><span class="st"> </span><span class="dv">1</span>)
      
      pago &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">rep</span>(cuota, t))
      pago &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(pago)
      pago<span class="op">$</span>t &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(<span class="kw">rownames</span>(pago))
      pago<span class="op">$</span>arriba &lt;-<span class="st"> </span>pago<span class="op">$</span>pago<span class="op">*</span>pago<span class="op">$</span>t<span class="op">*</span>(<span class="dv">1</span><span class="op">+</span>y)<span class="op">^</span>{<span class="op">-</span>pago<span class="op">$</span>t}
      pago<span class="op">$</span>abajo &lt;-<span class="st"> </span>pago<span class="op">$</span>pago<span class="op">*</span>(<span class="dv">1</span><span class="op">+</span>y)<span class="op">^</span>{<span class="op">-</span>pago<span class="op">$</span>t}
      duracion &lt;-<span class="st"> </span><span class="kw">sum</span>(pago<span class="op">$</span>arriba)<span class="op">/</span><span class="kw">sum</span>(pago<span class="op">$</span>abajo)
      
      <span class="kw">print</span>(duracion)
    }</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>Convexidad Bono Frances:</li>
</ol>
<pre class="sourceCode r"><code class="sourceCode r">     convexidad_frances &lt;-<span class="st"> </span><span class="cf">function</span>(p,tc,t,y,precio){
    
       <span class="co"># rep returns a vector with value = p * r and times = ttm -1</span>
       cuota &lt;-<span class="st"> </span>p<span class="op">*</span>(tc<span class="op">*</span>(<span class="dv">1</span><span class="op">+</span>tc)<span class="op">^</span>(t))<span class="op">/</span>((<span class="dv">1</span><span class="op">+</span>tc)<span class="op">^</span>(t) <span class="op">-</span><span class="st"> </span><span class="dv">1</span>)
      
       pago &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">rep</span>(cuota, t))
       pago &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(pago)
       pago<span class="op">$</span>t &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(<span class="kw">rownames</span>(pago))
       pago<span class="op">$</span>factor_desc &lt;-<span class="st"> </span><span class="dv">1</span> <span class="op">/</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span>y)<span class="op">^</span>(pago<span class="op">$</span>t)
       pago<span class="op">$</span>valor_prese &lt;-<span class="st"> </span>pago<span class="op">$</span>factor_desc<span class="op">*</span>pago<span class="op">$</span>pago<span class="op">*</span>((pago<span class="op">$</span>t)<span class="op">^</span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span>pago<span class="op">$</span>t)
       <span class="kw">print</span>(<span class="kw">sum</span>(pago<span class="op">$</span>valor_prese)<span class="op">*</span>(<span class="dv">1</span><span class="op">/</span>(precio<span class="op">*</span>(<span class="dv">1</span><span class="op">+</span>y)<span class="op">^</span><span class="dv">2</span>)))
    }</code></pre>
</div>
</div>
<div id="recursos-del-capitulo-1" class="section level2">
<h2><span class="header-section-number">4.10</span> Recursos del capítulo</h2>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="portafolio.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="options.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/lunr.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/04-Bonos.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
